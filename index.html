<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Collection</title>
    <script>
        const submitData = async () => {
            const apiUrl = "https://script.google.com/macros/s/.../exec"; // Replace with your Web App URL

            try {
                // Fetch IP address
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                const ipAddress = ipData.ip;

                // Get device details
                const deviceDetails = navigator.userAgent;

                // Prepare data to send
                const payload = {
                    ipAddress: ipAddress,
                    deviceDetails: deviceDetails
                };

                // Send data to Google Apps Script
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.status === "success") {
                    alert("Data submitted successfully!");
                } else {
                    alert("Error submitting data.");
                }
            } catch (error) {
                console.error("Error:", error);
                alert("An error occurred while submitting data.");
            }
        };
    </script>
</head>
<body>
    <h1>Data Collection Page</h1>
    <p>By clicking the button below, you consent to submitting your IP address and device details.</p>
    <button onclick="submitData()">Submit Data</button>
</body>
</html>